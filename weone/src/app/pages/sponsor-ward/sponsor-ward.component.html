<section class="weone-sponsor-hero">
    <div class="weone-hero-container">
        <div class="weone-hero-content" appScrollAnimate>
            <div class="weone-hero-badge">
                <span class="weone-badge-dot"></span>
                Be a Nation Builder
            </div>
            <h1 class="weone-hero-title">
                Sponsor Kerala's<br />
                Digital Empowerment
            </h1>
            <p class="weone-hero-subtitle">
                From Digital Literacy to Digital Empowerment. Join the WeOne
                Movement and create lasting impact across communities.
            </p>
            <div class="weone-hero-stats">
                <div class="weone-stat-item">
                    <span class="weone-stat-number">₹15,000</span>
                    <span class="weone-stat-label"
                        >Per Correspondent/Month</span
                    >
                </div>
                <div class="weone-stat-item">
                    <span class="weone-stat-number">3X</span>
                    <span class="weone-stat-label">Wallet Bonus Value</span>
                </div>
                <div class="weone-stat-item">
                    <span class="weone-stat-number">100%</span>
                    <span class="weone-stat-label">Digital Coverage</span>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="weone-section weone-intro-section">
    <div class="weone-container">
        <div class="weone-intro-content" appScrollAnimate>
            <p class="weone-intro-text">
                <strong>WeOne</strong>, developed by
                <strong>Intia (OPC) Private Limited</strong> in partnership with
                the <strong>Local Self Government Department (LSGD)</strong>,
                Government of Kerala, is more than a social media platform — it
                is a verified social development ecosystem designed to connect
                every household, every ward, and every community through
                transparent, technology-driven engagement.
            </p>
            <p class="weone-intro-text">
                Your sponsorship directly supports
                <strong>Digital India</strong>,
                <strong>Atmanirbhar Bharat</strong>, and Kerala's
                <strong>Smart Governance Vision</strong>
                — while creating livelihood, awareness, and digital inclusion at
                the grassroots level.
            </p>
        </div>
    </div>
</section>

<section class="weone-section weone-why-matters-section">
    <div class="weone-container">
        <div class="weone-section-header" appScrollAnimate>
            <h2 class="weone-section-title">Why Your Sponsorship Matters</h2>
            <p class="weone-section-subtitle">
                This is not a donation — it's an investment in India's digital
                future.
            </p>
        </div>

        <div class="weone-benefits-grid">
            <div
                class="weone-benefit-card"
                appScrollAnimate
                [animationDelay]="0"
            >
                <div class="weone-benefit-icon">
                    <i class="pi pi-briefcase"></i>
                </div>
                <h3>Creates Local Employment</h3>
                <p>
                    Trained youth and women become WeOne Correspondents, earning
                    dignified livelihoods while serving their communities.
                </p>
            </div>
            <div
                class="weone-benefit-card"
                appScrollAnimate
                [animationDelay]="100"
            >
                <div class="weone-benefit-icon">
                    <i class="pi pi-users"></i>
                </div>
                <h3>Connects Communities</h3>
                <p>
                    Hundreds of households gain access to verified civic
                    platforms, closing the information gap at the grassroots
                    level.
                </p>
            </div>
            <div
                class="weone-benefit-card"
                appScrollAnimate
                [animationDelay]="200"
            >
                <div class="weone-benefit-icon">
                    <i class="pi pi-comments"></i>
                </div>
                <h3>Enables Communication</h3>
                <p>
                    Transparent, two-way dialogue between citizens and local
                    government bodies becomes a reality.
                </p>
            </div>
            <div
                class="weone-benefit-card"
                appScrollAnimate
                [animationDelay]="300"
            >
                <div class="weone-benefit-icon"><i class="pi pi-flag"></i></div>
                <h3>Strengthens Digital India</h3>
                <p>
                    Direct support to the national mission through inclusive,
                    community-driven digital participation.
                </p>
            </div>
        </div>
    </div>
</section>

<section class="weone-section weone-bonus-section">
    <div class="weone-container">
        <div class="weone-bonus-highlight" appScrollAnimate>
            <div class="weone-bonus-icon"><i class="pi pi-gift"></i></div>
            <div class="weone-bonus-content">
                <h3>Your Sponsorship Multiplies in Value</h3>
                <p>
                    Receive <strong>3X promotional value</strong> in your WeOne
                    App Wallet. Sponsor ₹15,000 and get
                    <strong>₹45,000</strong> in advertising credits to promote
                    your brand, products, or services across Kerala's digital
                    network.
                </p>
                <ul class="weone-bonus-list">
                    <li>
                        <i class="pi pi-check-circle"></i> Nationwide
                        advertising campaigns
                    </li>
                    <li>
                        <i class="pi pi-check-circle"></i> Targeted audience by
                        district and ward
                    </li>
                    <li>
                        <i class="pi pi-check-circle"></i> WeOne Privilege
                        Partner for Life
                    </li>
                    <li>
                        <i class="pi pi-check-circle"></i> Priority visibility
                        in digital campaigns
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="weone-section weone-tool-section">
    <div class="weone-container">
        <div class="weone-tool-layout">
            <div class="weone-tool-main">
                <div class="weone-section-header-small" appScrollAnimate>
                    <h3>Select Wards to Sponsor</h3>
                    <p>
                        Choose a district and local body to view available
                        wards. Each correspondent requires ₹15,000 + 18% GST per
                        month.
                    </p>
                </div>

                <div class="weone-filter-section" appScrollAnimate>
                    <div class="weone-filter-controls">
                        <div class="weone-filter-item">
                            <label for="zone">Zone</label>
                            <p-select
                                inputId="zone"
                                [options]="zones()"
                                placeholder="Select Zone"
                                optionLabel="name"
                                [(ngModel)]="selectedZone"
                                (onChange)="onZoneChange($event)"
                                [style]="{ width: '100%' }"
                                [loading]="zonesLoading()"
                                appendTo="body"
                            />
                        </div>
                        <div class="weone-filter-item">
                            <label for="district">District</label>
                            <p-select
                                inputId="district"
                                [options]="districts()"
                                placeholder="Select District"
                                optionLabel="name"
                                [(ngModel)]="selectedDistrict"
                                (onChange)="onDistrictChange($event)"
                                [disabled]="!selectedZone()"
                                [loading]="districtsLoading()"
                                [style]="{ width: '100%' }"
                                appendTo="body"
                            />
                        </div>
                        <div class="weone-filter-item">
                            <label for="subdistrict">Sub District</label>
                            <p-select
                                inputId="subdistrict"
                                [options]="subDistricts()"
                                placeholder="Select Sub District"
                                optionLabel="name"
                                [(ngModel)]="selectedSubdistrict"
                                (onChange)="onSubdistrictChange($event)"
                                [disabled]="!selectedDistrict()"
                                [loading]="subdistrictsLoading()"
                                [style]="{ width: '100%' }"
                                appendTo="body"
                            />
                        </div>
                        <div class="weone-filter-item">
                            <label for="localBodyType">Filter by Type</label>
                            <p-select
                                inputId="localBodyType"
                                [options]="localBodyTypeOptions()"
                                [(ngModel)]="selectedLocalBodyType"
                                [style]="{ width: '100%' }"
                                appendTo="body"
                            />
                        </div>
                    </div>
                </div>

                <div class="weone-table-wrapper" appScrollAnimate>
                    <div
                        class="weone-table-actions-header"
                        *ngIf="selectedWards().length > 0"
                    >
                        <div class="weone-selection-info">
                            <strong>{{ selectedWards().length }}</strong>
                            ward(s) selected
                        </div>
                        <p-button
                            label="Sponsor Selected Wards"
                            icon="pi pi-calendar-plus"
                            (onClick)="openBulkSponsorDialog()"
                        ></p-button>
                    </div>

                    <p-table
                        [value]="filteredWards()"
                        [loading]="wardsLoading()"
                        [(selection)]="selectedWards"
                        dataKey="_id"
                        styleClass="weone-wards-table"
                        [paginator]="true"
                        [rows]="10"
                        [showCurrentPageReport]="true"
                        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} wards"
                    >
                        <ng-template pTemplate="header">
                            <tr>
                                <th colspan="6">
                                    <div class="p-input-icon-left w-full">
                                        <i class="pi pi-search"></i>
                                        <input
                                            pInputText
                                            type="text"
                                            [(ngModel)]="searchText"
                                            placeholder="Search by Ward or Local Body..."
                                            class="w-full"
                                        />
                                    </div>
                                </th>
                            </tr>
                            <tr>
                                <th style="width: 4rem">
                                    <p-tableHeaderCheckbox />
                                </th>
                                <th style="width: 30%">Ward Name</th>
                                <th style="width: 15%">Type</th>
                                <th style="width: 20%">Local Body</th>
                                <th style="width: 15%">Max Executives</th>
                                <th style="width: 20%">Action</th>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="body" let-ward>
                            <tr>
                                <td>
                                    <p-tableCheckbox [value]="ward" />
                                </td>
                                <td>
                                    <div class="weone-ward-info">
                                        <strong>{{ ward.wardName }}</strong>
                                        <small
                                            >{{ ward.localBodyName }},
                                            {{ ward.districtName }}</small
                                        >
                                    </div>
                                </td>
                                <td>
                                    <span
                                        class="weone-badge"
                                        [class.weone-badge-urban]="
                                            ward.type === 'Urban'
                                        "
                                        [class.weone-badge-rural]="
                                            ward.type === 'Rural'
                                        "
                                    >
                                        {{ ward.type }}
                                    </span>
                                </td>
                                <td>
                                    <span class="weone-badge weone-badge-lsgd">
                                        {{
                                            getLocalBodyTypeLabel(
                                                ward.localBodyType
                                            )
                                        }}
                                    </span>
                                </td>
                                <td>
                                    <strong>{{
                                        getMaxExecutives(ward.localBodyType)
                                    }}</strong
                                    >&nbsp;
                                    <small>Executive(s)</small>
                                </td>
                                <td>
                                    <p-button
                                        label="Sponsor"
                                        icon="pi pi-heart"
                                        size="small"
                                        (onClick)="openVolunteerDialog(ward)"
                                    />
                                </td>
                            </tr>
                        </ng-template>

                        <ng-template pTemplate="emptymessage">
                            <tr>
                                <td colspan="6">
                                    <div class="weone-empty-state">
                                        <i class="pi pi-inbox"></i>
                                        <p>
                                            Please select zone, district, and
                                            local body to view available wards
                                        </p>
                                    </div>
                                </td>
                            </tr>
                        </ng-template>
                    </p-table>
                </div>
            </div>

            <div class="weone-tool-sidebar">
                <div class="weone-sidebar-card" appScrollAnimate>
                    <h4>Your Details</h4>
                    <div class="weone-form-group">
                        <label>Sponsoring as</label>
                        <p-selectButton
                            [options]="sponsorTypeOptions()"
                            [(ngModel)]="sponsorType"
                            optionLabel="label"
                            optionValue="value"
                        />
                    </div>
                    <div class="weone-form-group">
                        <label for="sponsorName">
                            {{
                                sponsorType() === 'company'
                                    ? 'Company Name'
                                    : 'Full Name'
                            }}
                        </label>
                        <input
                            id="sponsorName"
                            type="text"
                            pInputText
                            [(ngModel)]="sponsorName"
                            placeholder="Enter your name"
                            [style]="{ width: '100%' }"
                        />
                    </div>
                    <div class="weone-form-group">
                        <label for="sponsorEmail">Email Address</label>
                        <input
                            id="sponsorEmail"
                            type="email"
                            pInputText
                            [(ngModel)]="sponsorEmail"
                            placeholder="your@email.com"
                            [style]="{ width: '100%' }"
                        />
                    </div>
                </div>

                <div
                    class="weone-sidebar-card weone-cart-card"
                    appScrollAnimate
                    [animationDelay]="100"
                >
                    <h4>
                        <i class="pi pi-shopping-cart"></i> Sponsorship Cart
                    </h4>
                    @if (cartItems().length === 0) {
                        <div class="weone-empty-cart">
                            <i class="pi pi-shopping-bag"></i>
                            <p>Your cart is empty</p>
                            <small>Select wards to sponsor</small>
                        </div>
                    } @else {
                        <div class="weone-cart-items">
                            @for (
                                item of cartItems();
                                track item.ward.wardName
                            ) {
                                <div class="weone-cart-item">
                                    <div class="weone-cart-item-details">
                                        <strong>{{
                                            item.ward.wardName
                                        }}</strong>
                                        <small
                                            >{{ item.ward.localBodyName }} ({{
                                                item.ward.localBodyType
                                            }})</small
                                        >
                                        <span class="weone-cart-item-count">
                                            {{ item.executivesSponsored }}
                                            {{
                                                item.executivesSponsored === 1
                                                    ? 'Executive'
                                                    : 'Executives'
                                            }}
                                        </span>
                                    </div>
                                    <div class="weone-cart-item-actions">
                                        <span class="weone-cart-item-price">
                                            {{
                                                item.costPerMonth
                                                    | currency
                                                        : 'INR'
                                                        : 'symbol'
                                                        : '1.0-0'
                                            }}
                                        </span>
                                        <button
                                            type="button"
                                            class="weone-cart-remove"
                                            (click)="
                                                removeFromCart(item.ward._id)
                                            "
                                            title="Remove"
                                        >
                                            <i class="pi pi-times"></i>
                                        </button>
                                    </div>
                                </div>
                            }
                        </div>
                        <div class="weone-cart-summary">
                            <div class="weone-summary-row">
                                <span>Subtotal</span>
                                <span>{{
                                    subtotal()
                                        | currency: 'INR' : 'symbol' : '1.0-0'
                                }}</span>
                            </div>
                            <div class="weone-summary-row">
                                <span>GST (18%)</span>
                                <span>{{
                                    gst() | currency: 'INR' : 'symbol' : '1.0-0'
                                }}</span>
                            </div>
                            <div class="weone-summary-row weone-summary-total">
                                <span>Total</span>
                                <span>{{
                                    total()
                                        | currency: 'INR' : 'symbol' : '1.0-0'
                                }}</span>
                            </div>
                            <div class="weone-summary-bonus">
                                <i class="pi pi-gift"></i>
                                <div>
                                    <strong>Wallet Bonus</strong>
                                    <span>{{
                                        walletBonus()
                                            | currency
                                                : 'INR'
                                                : 'symbol'
                                                : '1.0-0'
                                    }}</span>
                                </div>
                            </div>
                        </div>
                    }
                    <p-button
                        label="Proceed to Payment"
                        icon="pi pi-lock"
                        [disabled]="!isFormValid()"
                        (onClick)="proceedToPayment()"
                        [style]="{ width: '100%' }"
                        styleClass="weone-checkout-btn"
                    />
                </div>
            </div>
        </div>
    </div>
</section>

<p-dialog
    [header]="'Sponsor ' + selectedWardForSponsorship()?.wardName"
    [(visible)]="isVolunteerDialogVisible"
    [modal]="true"
    [style]="{ width: '450px' }"
    [draggable]="false"
    [resizable]="false"
>
    <div class="weone-dialog-content">
        <div class="weone-ward-summary">
            <div class="weone-ward-summary-item">
                <span class="weone-label">Local Body Type:</span>
                <span class="weone-badge weone-badge-lsgd">{{
                    getLocalBodyTypeLabel(
                        selectedWardForSponsorship()?.localBodyType!
                    )
                }}</span>
            </div>
            <div class="weone-ward-summary-item">
                <span class="weone-label">Max Executives:</span>
                <span class="weone-value">{{ maxExecutives() }}</span>
            </div>
        </div>

        <div class="weone-dialog-form">
            <label for="executiveCount">Number of Executives to Sponsor</label>
            <p-inputNumber
                inputId="executiveCount"
                [(ngModel)]="sponsoredExecutivesCount"
                [min]="1"
                [max]="maxExecutives()"
                [showButtons]="true"
                buttonLayout="horizontal"
                incrementButtonIcon="pi pi-plus"
                decrementButtonIcon="pi pi-minus"
                [style]="{ width: '100%' }"
            />

            <div class="weone-date-picker-group">
                <div class="weone-form-group">
                    <label for="startDate">Sponsorship Start Date</label>
                    <p-datePicker
                        inputId="startDate"
                        [(ngModel)]="sponsorshipStartDate"
                        [minDate]="today"
                        dateFormat="dd/mm/yy"
                        [style]="{ width: '100%' }"
                        appendTo="body"
                    />
                </div>
                <div class="weone-form-group">
                    <label for="endDate">Sponsorship End Date</label>
                    <p-datePicker
                        inputId="endDate"
                        [(ngModel)]="sponsorshipEndDate"
                        [minDate]="minEndDate()"
                        [disabled]="!sponsorshipStartDate()"
                        dateFormat="dd/mm/yy"
                        [style]="{ width: '100%' }"
                        appendTo="body"
                    />
                </div>
            </div>

            <div class="weone-cost-preview">
                <div class="weone-cost-item">
                    <span>Monthly Cost per Executive:</span
                    ><strong>₹15,000</strong>
                </div>
                <div class="weone-cost-item">
                    <span>Total Monthly Cost:</span>
                    <strong>{{
                        sponsoredExecutivesCount() * 15000
                            | currency: 'INR' : 'symbol' : '1.0-0'
                    }}</strong>
                </div>
                <div class="weone-cost-item">
                    <span>GST (18%):</span>
                    <strong>{{
                        sponsoredExecutivesCount() * 15000 * 0.18
                            | currency: 'INR' : 'symbol' : '1.0-0'
                    }}</strong>
                </div>
                <div class="weone-cost-item weone-cost-total">
                    <span>Total:</span>
                    <strong>{{
                        sponsoredExecutivesCount() * 15000 * 1.18
                            | currency: 'INR' : 'symbol' : '1.0-0'
                    }}</strong>
                </div>
            </div>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button
            label="Cancel"
            severity="secondary"
            [outlined]="true"
            (onClick)="isVolunteerDialogVisible.set(false)"
        />
        <p-button
            label="Add to Cart"
            icon="pi pi-shopping-cart"
            (onClick)="addToCart()"
            [disabled]="!sponsorshipStartDate() || !sponsorshipEndDate()"
        />
    </ng-template>
</p-dialog>

<p-dialog
    header="Sponsor Multiple Wards"
    [(visible)]="isBulkSponsorDialogVisible"
    [modal]="true"
    [style]="{ width: '500px' }"
    [draggable]="false"
    [resizable]="false"
>
    <div class="weone-dialog-content">
        <div class="weone-bulk-summary">
            You are setting the sponsorship details for
            <strong>{{ selectedWards().length }} selected wards</strong>. This
            will apply the same executive count and date range to all of them.
        </div>
        <div class="weone-dialog-form">
            <label for="bulkExecutiveCount"
                >Number of Executives to Sponsor (per ward)</label
            >
            <p-inputNumber
                inputId="bulkExecutiveCount"
                [(ngModel)]="bulkSponsoredExecutivesCount"
                [min]="1"
                [max]="5"
                [showButtons]="true"
                buttonLayout="horizontal"
                incrementButtonIcon="pi pi-plus"
                decrementButtonIcon="pi pi-minus"
                [style]="{ width: '100%' }"
            />
            <div class="weone-date-picker-group">
                <div class="weone-form-group">
                    <label for="bulkStartDate">Sponsorship Start Date</label>
                    <p-datePicker
                        inputId="bulkStartDate"
                        [(ngModel)]="bulkSponsorshipStartDate"
                        [minDate]="today"
                        dateFormat="dd/mm/yy"
                        [style]="{ width: '100%' }"
                        appendTo="body"
                    />
                </div>
                <div class="weone-form-group">
                    <label for="bulkEndDate">Sponsorship End Date</label>
                    <p-datePicker
                        inputId="bulkEndDate"
                        [(ngModel)]="bulkSponsorshipEndDate"
                        [minDate]="bulkMinEndDate()"
                        [disabled]="!bulkSponsorshipStartDate()"
                        dateFormat="dd/mm/yy"
                        [style]="{ width: '100%' }"
                        appendTo="body"
                    />
                </div>
            </div>
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button
            label="Cancel"
            severity="secondary"
            [outlined]="true"
            (onClick)="isBulkSponsorDialogVisible.set(false)"
        />
        <p-button
            label="Add Selected to Cart"
            icon="pi pi-shopping-cart"
            (onClick)="addSelectedWardsToCart()"
            [disabled]="
                !bulkSponsorshipStartDate() || !bulkSponsorshipEndDate()
            "
        />
    </ng-template>
</p-dialog>
