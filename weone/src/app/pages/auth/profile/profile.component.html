<section class="weone-section profile-page">
    <div class="weone-container">
        <div class="profile-header">
            <div class="header-content">
                <h1 class="weone-hero-title">
                    Welcome, {{ user()?.firstName || 'Manager' }}
                </h1>
                <p class="weone-hero-subtitle">
                    Manage your active sponsorships and account details below.
                </p>
            </div>

            <p-button
                label="Sign Out"
                icon="pi pi-sign-out"
                (onClick)="authService.signOut()"
                severity="secondary"
                class="sign-out-button"
            />
        </div>

        <div class="weone-table-wrapper">
            <p-table
                [value]="sponsorships()"
                [loading]="sponsorshipsLoading()"
                styleClass="weone-wards-table"
                [paginator]="true"
                [rows]="5"
                [showCurrentPageReport]="true"
                currentPageReportTemplate="Showing {first} to {last} of {totalRecords} sponsorships"
            >
                <ng-template pTemplate="body" let-sponsorship>
                    <tr>
                        <td>{{ sponsorship.endDate | date: 'mediumDate' }}</td>
                        <td>
                            <p-button
                                label="Cancel Sponsorship"
                                icon="pi pi-times-circle"
                                [text]="true"
                                severity="danger"
                                (onClick)="onCancel(sponsorship._id)"
                                [loading]="isCancelling()"
                            />
                        </td>
                    </tr>
                </ng-template>
            </p-table>
        </div>
    </div>
</section>
